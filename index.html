<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chúc Mừng Năm Mới</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
</head>

<body>
    <!-- Decorative header: lanterns + seal -->
    <div class="decorations" aria-hidden="true">
        <div class="lantern lantern-left"></div>
        <div class="lantern lantern-right"></div>
        <div class="seal">TẾT</div>
    </div>

    <!-- Canvas pháo hoa nền -->
    <canvas id="fireworks-canvas"></canvas>

    <!-- Lớp tuyết rơi (phía trước) -->
    <div id="snow-container" aria-hidden="true"></div>

    <!-- Nút bật/tắt nhạc -->
    <button type="button" id="music-toggle" class="music-toggle" aria-label="Bật/tắt nhạc nền">
    <span class="icon-music">♪</span>
    <span class="label">Nhạc</span>
  </button>

    <!-- Form nhập tên (hiện trước) -->
    <div id="name-form-wrapper" class="name-form-wrapper">
        <form id="name-form" class="name-form glass">
            <label for="user-name">Nhập tên của bạn</label>
            <input type="text" id="middle-name" name="middle-name" placeholder="Tên lót (ví dụ: Quang,...) - bắt buộc" maxlength="30" autocomplete="off">
            <input type="text" id="user-name" name="user-name" placeholder="Tên chính: Ví dụ: Phúc,..." maxlength="50" autocomplete="off">
            <button type="button" id="btn-view-card">Xem thiệp</button>
        </form>
    </div>

    <!-- Thiệp chúc mừng (ẩn đến khi nhập tên xong) -->
    <main class="card-wrapper hidden" id="card-wrapper">
        <article class="card glass">
            <h1 class="card-title">Chúc Mừng Năm Mới</h1>
            <div class="wishes">
                <p class="line" data-line="0" id="line-0"></p>
                <p class="line" data-line="1">triệu sư như mơ,</p>
                <p class="line" data-line="2">trăm sự bất ngờ,</p>
                <p class="line" data-line="3">hàng giờ hạnh phúc.</p>
            </div>
        </article>
    </main>

    <!-- Extra card for special-name greetings -->
    <main class="card-wrapper hidden" id="extra-card-wrapper">
        <article class="card glass" id="extra-card">
            <h2 class="card-title">Bonus cho người đặc biệt</h2>
            <div class="wishes">
                <p class="line" id="extra-line"></p>
            </div>
        </article>
    </main>

    <!-- Nhạc nền (file giả định newyear.mp3) -->
    <audio id="bg-music" loop preload="auto">
    <source src="./music1.mp3" type="audio/mpeg">
  </audio>

    <!-- Form gửi lời chúc từ khách -->
    <section id="wish-section" class="wish-section glass hidden">
        <h3>Gửi lời chúc</h3>
        <form id="wish-form">
            <input type="text" id="sender-name" name="sender-name" placeholder="Tên của bạn (không bắt buộc)" maxlength="50" autocomplete="off">
            <textarea id="wish-message" name="wish-message" rows="3" placeholder="Viết lời chúc..." maxlength="500" required></textarea>
            <div class="wish-actions">
                <button type="submit">Gửi lời chúc</button>
                <button type="button" id="owner-view-btn">Xem lời chúc (chủ)</button>
            </div>
        </form>
        <div id="wishes-preview" class="wishes-preview" aria-live="polite"></div>
    </section>

    <!-- Modal/khung xem dành cho chủ, bảo vệ bằng mật khẩu đơn giản -->
    <div id="owner-modal" class="owner-modal hidden" aria-hidden="true">
        <div class="owner-modal-content glass">
            <button id="owner-close" class="owner-close">Đóng</button>
            <h3>Lời chúc đã nhận</h3>
            <div id="owner-wishes-list" class="owner-wishes-list"></div>
            <div class="owner-actions">
                <button id="owner-clear">Xóa tất cả</button>
            </div>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>

</html>